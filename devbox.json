{
  "packages": [
    "doppler",
    "go_1_19",
    "protobuf",
    "go-protobuf",
    "go-task",
    "nats-server",
    "redis",
    "postgresql_14",
    "glibcLocales"
  ],
  "shell": {
    "init_hook": [
      "sh devbox/post-install.sh",
      "source devbox/pre-exit.sh",
      "finish || true",
      "nats-server -P /tmp/tsuwari-nats.pid -c devbox/conf/nats/nats.conf &",
      "echo \"redis-server devbox/conf/redis/redis.conf\" &",
      "docker run -d --name tsuwari-redis-stack -p 62510:6379 -v /devbox/data/redis:/data redis/redis-stack-server:latest &",
      "postgres -c config_file=devbox/conf/postgres/postgres.conf -k /tmp &",
      "sleep 1 && createdb -p 57453 -h /tmp tsuwari || true &",
      "createuser -d -s -p 57453 -h /tmp tsuwari || true &"
    ]
  }
}
