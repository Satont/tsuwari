---
import Profile from '../components/Profile.astro';
import { Icon } from 'astro-icon/components';

import { navLinks } from '../data/navLinks.js';
---

<header id="top" class="bg-[#09090B]/25 sm:px-8 px-4 sticky header top-[-1px] z-50">
  <div class="lg:container">
    <div class="flex justify-between items-center border-b border-[#9DA2BA]/30 py-4">
      <div class="flex items-center gap-[4px] divide-x-2">
				<a href="#" class="flex items-center gap-[12px] cursor-pointer">
					<Icon name="TwirLogo" class="w-9 h-9" />
					<span class="text-2xl font-semibold text-white">Twir</span>
				</a>

				<div class="bg-red inline-block h-full"></div>

				<span class="pl-2 text-sm">
					Hosted by <a href="https://avoro.eu/cp/aff.php?aff=82" target="_blank" class="underline">avoro.eu</a>
				</span>
      </div>
      <nav class="md:inline-flex gap-x-2 hidden">
        {
          navLinks.map((item) => (
            <a
              href={item.href}
              class="text-[#ADB0B8] font-medium px-3 py-2 leading-6 hover:text-[#D5D8DF] rounded-md focus-visible:text-[#D5D8DF] navigation-link">
              {item.label}
            </a>
          ))
        }
      </nav>

      <Profile />
    </div>
  </div>
</header>

<style>
.sticky-header {
	background-color: #17171A !important;
}
</style>

<script>
	// add class with background to header
	const el = document.querySelector("header")
	const observer = new IntersectionObserver(
		([e]) => {
			e.target.classList.toggle("sticky-header", e.intersectionRatio < 1)
		},
		{ threshold: [1] }
	);

	observer.observe(el);
</script>
